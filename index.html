<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Учебник по языкам программирования</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            background-color: #121212;
            color: #ffffff;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }
        #menu {
            position: fixed;
            top: 0;
            width: 100%;
            background-color: #1e1e1e;
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.5);
            z-index: 1000;
        }
        .menu-button {
            background-color: #2c2c2c;
            color: #ffffff;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
        }
        .menu-button:hover, .menu-button.active {
            background-color: #007bff;
            transform: scale(1.05);
        }
        #content {
            margin-top: 60px;
            width: 90%;
            max-width: 800px;
            padding: 20px;
            margin-left: auto;
            margin-right: auto;
            transition: opacity 0.3s;
        }
        .frame {
            display: none;
            opacity: 0;
            animation: fadeIn 0.3s forwards;
        }
        .frame.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .welcome {
            text-align: center;
        }
        .avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            margin-bottom: 20px;
        }
        .chapter-list, .language-list {
            list-style: none;
            padding: 0;
        }
        .item {
            background-color: #2c2c2c;
            margin: 10px 0;
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .item:hover {
            background-color: #3a3a3a;
        }
        .chapter-content {
            background-color: #1e1e1e;
            padding: 20px;
            border-radius: 8px;
            line-height: 1.6;
        }
        pre {
            background-color: #000;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
        }
        code {
            color: #f8f8f2;
        }
    </style>
</head>
<body>
    <div id="menu">
        <button class="menu-button" onclick="switchFrame(1)">Фрейм 1</button>
        <button class="menu-button" onclick="switchFrame(2)">Фрейм 2</button>
        <button class="menu-button" onclick="switchFrame(3)">Фрейм 3</button>
    </div>
    <div id="content">
        <div id="frame1" class="frame active">
            <div class="welcome">
                <h1 id="welcome-text">Привет, Гость!</h1>
                <img id="avatar" class="avatar" src="" alt="Аватар пользователя">
                <p>Здесь скоро появится дополнительная информация о вашем прогрессе и настройках.</p>
            </div>
        </div>
        <div id="frame2" class="frame">
            <div id="chapter-content"></div>
        </div>
        <div id="frame3" class="frame">
            <h2>О приложении</h2>
            <p>Это учебник по языкам программирования, разработанный для удобного изучения основ Python, JavaScript и Java. Приложение позволяет изучать главы, сохранять прогресс и получать персонализированные приветствия.</p>
            <p>Версия: 1.0 | Дата: 19 сентября 2025 | Разработано для защиты диплома.</p>
            <p>Источник контента: адаптировано из METANIT и других открытых ресурсов.</p>
        </div>
    </div>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        // Данные учебника
        const textbook = {
            languages: [
                { name: 'Python', id: 'python' },
                { name: 'JavaScript', id: 'javascript' },
                { name: 'Java', id: 'java' }
            ],
            chapters: {
                python: [
                    { 
                        title: 'Основы Python', 
                        content: 'Python — простой и мощный язык, идеален для начинающих. Установите его с python.org и напишите первую программу.<br><br>Синтаксис включает переменные, условия и циклы.<br><br>Пример кода:<pre><code>print("Привет, мир!")</code></pre>' 
                    },
                    { 
                        title: 'Функции в Python', 
                        content: 'Функции создаются с def, принимают параметры и возвращают значения.<br><br>Используйте их для повторного кода.<br><br>Пример кода:<pre><code>def summa(a, b):<br>    return a + b<br>print(summa(5, 3))  # 8</code></pre>' 
                    }
                ],
                javascript: [
                    { 
                        title: 'Введение в JavaScript', 
                        content: 'JavaScript делает веб-страницы интерактивными. Работает в браузере.<br><br>Начните с console.log.<br><br>Пример кода:<pre><code>console.log("Привет, мир!");</code></pre>' 
                    },
                    { 
                        title: 'Основы JavaScript', 
                        content: 'Переменные: let, const. Типы: числа, строки.<br><br>Условия и циклы для логики.<br><br>Пример кода:<pre><code>let x = 10;<br>console.log(x + 5);  // 15</code></pre>' 
                    }
                ],
                java: [
                    { 
                        title: 'Введение в Java', 
                        content: 'Java — платформо-независимый язык. Установите JDK.<br><br>Первая программа с main.<br><br>Пример кода:<pre><code>public class HelloWorld {<br>    public static void main(String[] args) {<br>        System.out.println("Привет, мир!");<br>    }<br>}</code></pre>' 
                    },
                    { 
                        title: 'Основы Java', 
                        content: 'Переменные: int, String. Условия: if-else.<br><br>Циклы: for, while.<br><br>Пример кода:<pre><code>int x = 10;<br>System.out.println(x);</code></pre>' 
                    }
                ]
            }
        };

        // Функции для рендеринга
        const contentDiv = document.getElementById('chapter-content');
        const welcomeText = document.getElementById('welcome-text');
        const avatarImg = document.getElementById('avatar');

        function showLanguages() {
            contentDiv.innerHTML = '<ul class="language-list"></ul>';
            const ul = contentDiv.querySelector('ul');
            textbook.languages.forEach(lang => {
                const li = document.createElement('li');
                li.className = 'item';
                li.textContent = lang.name;
                li.onclick = () => showChapters(lang.id);
                ul.appendChild(li);
            });
        }

        function showChapters(langId) {
            contentDiv.innerHTML = '<button class="back-button" onclick="showLanguages()">Назад к языкам</button><ul class="chapter-list"></ul>';
            const ul = contentDiv.querySelector('ul');
            textbook.chapters[langId].forEach(chapter => {
                const li = document.createElement('li');
                li.className = 'item';
                li.textContent = chapter.title;
                li.onclick = () => showChapterContent(langId, chapter.title, chapter.content);
                ul.appendChild(li);
            });
        }

        function showChapterContent(langId, title, content) {
            contentDiv.innerHTML = `
                <button class="back-button" onclick="showChapters('${langId}')">Назад к главам</button>
                <div class="chapter-content">
                    <h2>${title}</h2>
                    <p>${content}</p>
                </div>
            `;
        }

        function switchFrame(frameId) {
            document.querySelectorAll('.frame').forEach(frame => frame.classList.remove('active'));
            document.getElementById(`frame${frameId}`).classList.add('active');
            localStorage.setItem('activeFrame', frameId);
            document.querySelectorAll('.menu-button').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`.menu-button:nth-child(${frameId})`).classList.add('active');
        }

        // Инициализация
        document.addEventListener('DOMContentLoaded', () => {
            const savedFrame = localStorage.getItem('activeFrame') || 1;
            switchFrame(savedFrame);

            // Telegram WebApp интеграция
            if (window.Telegram && window.Telegram.WebApp) {
                Telegram.WebApp.ready();
                Telegram.WebApp.expand();
                const user = Telegram.WebApp.initDataUnsafe.user;
                if (user) {
                    welcomeText.textContent = `Привет, ${user.first_name}!`;
                    if (user.photo_url) {
                        avatarImg.src = user.photo_url;
                    }
                }
            } else {
                welcomeText.textContent = 'Привет, Гость!';
            }

            // Инициализация фрейма 2
            showLanguages();
        });
    </script>
</body>
</html>